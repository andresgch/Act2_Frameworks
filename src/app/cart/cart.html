<div class="primary-nav" [class.activo]="visible">
  <nav role="navigation" class="menu">
    <div class="overflow-container">
      <div class="px-3 py-4 b-green d-flex justify-content-between align-items-center">
        <h4 class="text-white m-0">Carrito de compras</h4>
        <button type="button" class="btn btn-close btn-green me-2 hamburger open-panel nav-toggle2"
          (click)="onCerrarClick()" aria-label="Close">
        </button>
      </div>
      
      <div class="p-3">
        <!-- PRODUCTOS DEL CARRITO -->
        <ul class="menu-dropdown border-bottom">
          <li class="submenu pb-3" *ngFor="let producto of carritoService.productos; let i = index">
            <div class="detail-cart d-flex">
              <img [src]="producto.imagen" [alt]="producto.nombre" class="imagen-carrito">
              <div class="ms-3">
                <h4 class="green-color m-lg-0 mt-3"><strong>{{ producto.nombre }}</strong></h4>
                <p class="mt-0 mb-0 text-secondary-emphasis">{{ producto.descripcion }}</p>
                <div class="mt-3">
                  <h4 class="green-color m-lg-0 mt-3"><strong>€{{ producto.precio.toFixed(2) }}</strong></h4>
                </div>
              </div>
              <button type="button" class="btn-close" (click)="eliminarProducto(i)" aria-label="Close"></button>
            </div>
          </li>
        </ul>
        <div *ngIf="carritoService.productos.length === 0" class="text-center py-4">
          <p class="text-muted">Tu carrito está vacío</p>
          <small class="text-muted">Agrega productos desde la cafetería</small>
        </div>
      </div>
      
      <div class="px-3 py-4 b-green price position-absolute bottom-0 w-100">
        <div class="justify-content-between d-flex mb-1">
          <p class="text-white">{{ getCantidadProductos() }} producto(s)</p>
          <div>
            <small class="text-white">Subtotal</small>
            <h4 class="text-white">€{{ getTotal().toFixed(2) }}</h4>
          </div>
        </div>
        <div class="border-top">
          <button type="button" 
            class="btn btn-white border-white text-white px-0 px-lg-2 w-100 mt-3"
            (click)="irAlCheckout()"
            [disabled]="carritoService.productos.length === 0">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="bi bi-cart" viewBox="0 0 16 16">
              <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
            </svg>
            <small>Finalizar compra</small>
          </button>
        </div>
      </div>
    </div>
  </nav>
</div>